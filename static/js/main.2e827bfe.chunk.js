(this["webpackJsonpreact-project-1"]=this["webpackJsonpreact-project-1"]||[]).push([[0],{129:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"c",(function(){return u}));var n=r(44),c=r(3),o=r(23),s="network/dialogs/ADD-MESSAGE",a={dialogs:[{id:1,name:"Alex"},{id:2,name:"Dmitry"},{id:3,name:"Sophia"},{id:4,name:"Sergei"},{id:5,name:"Irina"}],messages:[{id:1,message:"Hi"},{id:2,message:"How are you?"},{id:3,message:"Hi! I'm OK!"}]},i=function(e){return{type:s,text:e}},u=function(){return function(e){e(Object(o.a)("dialog"))}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:var r={id:e.messages.length+1,message:t.text};return Object(c.a)(Object(c.a)({},e),{},{messages:[].concat(Object(n.a)(e.messages),[r])});default:return e}}},166:function(e,t,r){},170:function(e,t,r){},18:function(e,t,r){e.exports={nav:"Navbar_nav__3dlwf",item:"Navbar_item__1sktZ",active:"Navbar_active__29d4m"}},20:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return c}));var n=function(e){if(!e)return"This field is required"},c=function(e){return function(t){if(t&&t.length>e)return"Max length is ".concat(e," symbols")}}},291:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r.n(n),o=r(69),s=r.n(o),a=(r(166),r(29)),i=r(30),u=r(32),l=r(31),d=r(13),j=r(10),b=r(14),p=r(7),f=(r(170),r(3)),h=r.p+"static/media/preloader.42990b93.gif",O=r(0),g=function(){return Object(O.jsx)("div",{children:Object(O.jsx)("img",{src:h})})},m=r(12),x=r.n(m),v=r(24),P=r(23),w=r(33),_=r(16),k=r(132),C=r.n(k),I=r(72),S=r.n(I),y=function(e){return"".concat(e.charAt(0).toLowerCase()).concat(e.slice(1))},U=C.a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"c1cff70e-7a9f-4edf-8ac3-59091e2abdb2"}}),E=function(e){return e.length>0?e.reduce((function(e,t){if(t.includes("(")){var r=t.split(" ("),n=Object(_.a)(r,2),c=n[0],o=n[1].split(")")[0],s=o.includes("->")?o.split("->").reverse().map((function(e){return y(e)})).reduce((function(e,t,r){return Object(w.a)({},t,0===r?c:Object(f.a)({},e))}),{}):Object(w.a)({},y(o),c);return S.a.merge(Object(f.a)({},e),s)}return Object(f.a)(Object(f.a)({},e),{},{_error:t})}),{}):{_error:"Some error"}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return U.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},F=function(e){return U.post("follow/".concat(e)).then((function(e){return e.data}))},A=function(e){return U.delete("follow/".concat(e)).then((function(e){return e.data}))},D={getProfile:function(e){return U.get("profile/".concat(e)).then((function(e){return e.data}))},getProfileStatus:function(e){return U.get("profile/status/".concat(e)).then((function(e){return e.data}))},updateProfileStatus:function(e){return U.put("profile/status",{status:e}).then((function(e){return e.data}))},savePhoto:function(e){var t=new FormData;return t.append("image",e),U.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},updateData:function(e){return U.put("profile",e).then((function(e){return e.data}))}},T=function(){return U.get("auth/me").then((function(e){return e.data}))},M=function(e){return U.post("auth/login",e).then((function(e){return e.data}))},L=function(){return U.delete("auth/login").then((function(e){return e.data}))},B=function(){try{return U.get("security/get-captcha-url").then((function(e){return e.data}))}catch(e){alert("Caught http error while trying getCaptchaUrl()")}},z="network/auth/SET_AUTH_DATA",R="network/auth/GET_CAPTCHA_URL_SUCCESS",G={userId:null,email:null,login:null,photo:null,isAuth:!1,captchaUrl:null},H=function(e,t,r,n,c){return{type:z,payload:{userId:e,email:t,login:r,photo:n,isAuth:c}}},J=function(){return function(){var e=Object(v.a)(x.a.mark((function e(t){var r,n,c,o,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:if(0!==(r=e.sent).resultCode){e.next=12;break}return n=r.data.id,c=r.data.email,o=r.data.login,e.next=9,D.getProfile(n);case 9:return s=e.sent,t(H(n,c,o,s.photos.small,!0)),e.abrupt("return",s);case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},W=function(){return function(){var e=Object(v.a)(x.a.mark((function e(t){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B();case 2:r=e.sent,t((n=r.url,{type:R,payload:{captchaUrl:n}}));case 4:case"end":return e.stop()}var n}),e)})));return function(t){return e.apply(this,arguments)}}()},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:case R:return Object(f.a)(Object(f.a)({},e),t.payload);default:return e}},V=r.p+"static/media/user.ba422ca1.png",X=r(59),Y=r.n(X),Z=function(e){return Object(O.jsxs)("header",{className:Y.a.header,children:[Object(O.jsx)("img",{className:Y.a.logo,src:"https://upload.wikimedia.org/wikipedia/commons/1/1e/RPC-JP_Logo.png"}),Object(O.jsx)("div",{className:Y.a.authBlock,children:e.isAuth?Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{children:Object(O.jsxs)(b.b,{to:"/profile/".concat(e.userId),children:[Object(O.jsx)("img",{className:Y.a.userImg,src:e.photo||V}),Object(O.jsx)("div",{children:e.login})]})}),Object(O.jsx)("div",{children:Object(O.jsx)("button",{onClick:e.logout,children:"LogOut"})})]}):Object(O.jsx)(b.b,{to:"/login",children:"LogIn"})})]})},K=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"render",value:function(){return Object(O.jsx)(Z,{userId:this.props.userId,login:this.props.login,logout:this.props.logout,photo:this.props.photo,isAuth:this.props.isAuth})}}]),r}(c.a.Component),Q=Object(p.d)(Object(d.b)((function(e){return{userId:e.auth.userId,login:e.auth.login,photo:e.auth.photo,isAuth:e.auth.isAuth}}),{getAuthUserData:J,logout:function(){return function(){var e=Object(v.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:0===e.sent.resultCode&&t(H(null,null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),j.g)(K),$=r(130),ee=r(20),te=r(8),re=r(39),ne=r.n(re),ce=Object(ee.a)(30),oe=Object($.a)({form:"login"})((function(e){var t=e.error,r=e.handleSubmit,n=e.captchaUrl;return Object(O.jsxs)("form",{onSubmit:r,children:[Object(O.jsx)("div",{children:Object(te.c)(te.a,[ee.b,ce],"email",{placeholder:"Email"})}),Object(O.jsx)("div",{children:Object(te.c)(te.a,[ee.b,ce],"password",{placeholder:"Password"})}),Object(O.jsx)("div",{children:Object(te.c)(te.a,[],"rememberMe",{type:"checkbox",textAfter:" remember me"})}),n&&Object(O.jsx)("img",{src:n}),n&&Object(O.jsx)("div",{children:Object(te.c)(te.a,[ee.b],"captcha",{placeholder:"Symbols form image"})}),t&&Object(O.jsx)("div",{className:ne.a.commonError,children:t}),Object(O.jsx)("div",{children:Object(O.jsx)("button",{children:"Login"})})]})})),se=Object(d.b)((function(e){return{isAuth:e.auth.isAuth,captchaUrl:e.auth.captchaUrl}}),{login:function(e){return function(t){M(e).then((function(e){0===e.resultCode?t(J()):(10===e.resultCode&&t(W()),t(Object(P.b)("login",E(e.messages))))}))}}})((function(e){var t=e.isAuth,r=e.captchaUrl,n=e.login;return t?Object(O.jsx)(j.a,{to:"/profile"}):Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"Login page"}),Object(O.jsx)(oe,{onSubmit:n,captchaUrl:r})]})})),ae=r(36),ie=Object(p.d)(ae.a)((function(){return Object(O.jsx)("div",{children:"Music"})})),ue=r(18),le=r.n(ue),de=function(){return Object(O.jsxs)("nav",{className:le.a.nav,children:[Object(O.jsx)("div",{className:le.a.item,children:Object(O.jsx)(b.b,{to:"/profile",activeClassName:le.a.active,children:"Profile"})}),Object(O.jsx)("div",{className:le.a.item,children:Object(O.jsx)(b.b,{to:"/dialogs",activeClassName:le.a.active,children:"Dialogs"})}),Object(O.jsx)("div",{className:le.a.item,children:Object(O.jsx)(b.b,{to:"/news",activeClassName:le.a.active,children:"News"})}),Object(O.jsx)("div",{className:le.a.item,children:Object(O.jsx)(b.b,{to:"/users",activeClassName:le.a.active,children:"Users"})}),Object(O.jsx)("div",{className:le.a.item,children:Object(O.jsx)(b.b,{to:"/music",activeClassName:le.a.active,children:"Music"})}),Object(O.jsx)("div",{className:le.a.item,children:Object(O.jsx)(b.b,{to:"/settings",activeClassName:le.a.active,children:"Settings"})})]})},je=Object(p.d)(ae.a)((function(){return Object(O.jsx)("div",{children:"News"})})),be=r(44),pe="network/profile/ADD-POST",fe="network/profile/SET_USER_PROFILE",he="network/profile/SET_PROFILE_STATUS",Oe="network/profile/FETCHING_USER_PROFILE",ge="network/profile/SET_CURRENT_USER_ID",me="network/profile/SAVE_PHOTO_SUCCESS",xe="network/profile/TOGGLE_PROFILE_DATA_EDIT_MODE",ve={posts:[{id:1,message:"Hi! Like this post!",likesCount:"25"},{id:2,message:"Hello, friends!!!",likesCount:"12"},{id:3,message:"My first post! :)",likesCount:"10"}],profile:null,status:"",isFetchingUserProfile:!1,currentUserId:null,profileDataEditMode:!1},Pe=function(e){return{type:he,status:e}},we=function(e){return{type:Oe,isFetching:e}},_e=function(){return{type:xe}},ke=function(e){return function(){var t=Object(v.a)(x.a.mark((function t(r){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(we(!0)),t.next=3,D.getProfile(e);case 3:n=t.sent,r({type:fe,profile:n}),r(we(!1));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pe:var r={id:e.posts.length+1,message:t.text,likesCount:"0"};return Object(f.a)(Object(f.a)({},e),{},{posts:[].concat(Object(be.a)(e.posts),[r])});case fe:return Object(f.a)(Object(f.a)({},e),{},{profile:t.profile});case he:return Object(f.a)(Object(f.a)({},e),{},{status:t.status});case Oe:return Object(f.a)(Object(f.a)({},e),{},{isFetchingUserProfile:t.isFetching});case ge:return Object(f.a)(Object(f.a)({},e),{},{currentUserId:t.userId});case me:return Object(f.a)(Object(f.a)({},e),{},{profile:Object(f.a)(Object(f.a)({},e.profile),{},{photos:t.photos})});case xe:return Object(f.a)(Object(f.a)({},e),{},{profileDataEditMode:!e.profileDataEditMode});default:return e}},Ie=r(96),Se=r.n(Ie),ye=r(97),Ue=r.n(ye),Ee=function(e){var t=e.message,r=e.likesCount;return Object(O.jsxs)("div",{className:Ue.a.item,children:[Object(O.jsx)("img",{className:Ue.a.img,src:"https://miro.medium.com/max/1838/1*mk1-6aYaf_Bes1E3Imhc0A.jpeg"}),t,Object(O.jsx)("div",{children:Object(O.jsxs)("span",{children:[r," like"]})})]})},Ne=Object(ee.a)(5),Fe=Object($.a)({form:"post"})((function(e){var t=e.handleSubmit;return Object(O.jsxs)("form",{onSubmit:t,children:[Object(O.jsx)("div",{children:Object(te.c)(te.b,[Ne],"postText",{placeholder:"Write a new post"})}),Object(O.jsx)("div",{children:Object(O.jsx)("button",{children:"Add post"})})]})})),Ae=c.a.memo((function(e){var t=e.posts,r=e.addPost,n=e.resetPostForm;return Object(O.jsxs)("div",{className:Se.a.postsBlock,children:["My posts",Object(O.jsx)("div",{children:Object(O.jsx)(Fe,{onSubmit:function(e){var t=e.postText;r(t),n()}})}),Object(O.jsx)("div",{className:Se.a.posts,children:t.map((function(e){var t=e.id,r=e.message,n=e.likesCount;return Object(O.jsx)(Ee,{message:r,likesCount:n},t)}))})]})})),De=r(40),Te=r.n(De),Me=function(e){var t=e.profile,r=e.goToEditMode,n=e.isOwner,c=Object.entries(t.contacts).filter((function(e){var t=Object(_.a)(e,2);t[0];return t[1]}));return Object(O.jsxs)("div",{children:[n&&Object(O.jsx)("button",{onClick:r,children:"Edit"}),t.aboutMe&&Object(O.jsxs)("div",{children:[Object(O.jsx)("b",{children:"About me: "}),t.aboutMe]}),t.lookingForAJob&&Object(O.jsxs)("span",{children:[Object(O.jsx)("div",{children:Object(O.jsx)("b",{children:"Looking for a job"})}),Object(O.jsxs)("div",{children:[Object(O.jsx)("b",{children:"Description: "}),t.lookingForAJobDescription]})]}),c.length&&Object(O.jsxs)("div",{children:[Object(O.jsx)("b",{children:"Contacts"}),Object(O.jsx)("div",{className:Te.a.contactsList,children:c.map((function(e){var t=Object(_.a)(e,2),r=t[0],n=t[1];return Object(O.jsx)("div",{children:Object(O.jsx)("a",{target:"_blank",href:n,children:r})},r)}))})]})]})},Le=Object(ee.a)(100),Be=Object($.a)({form:"profile"})((function(e){var t=e.error,r=e.handleSubmit;return Object(O.jsxs)("form",{onSubmit:r,children:[Object(O.jsx)("div",{children:Object(O.jsx)("button",{children:"Save"})}),t&&Object(O.jsx)("div",{className:ne.a.commonError,children:t}),Object(O.jsxs)("div",{children:[Object(te.c)(te.a,[Le,ee.b],"fullName",{placeholder:"full name",textBefore:"Full name: "}),Object(te.c)(te.a,[Le,ee.b],"aboutMe",{placeholder:"Some info about you",textBefore:"About me: "}),Object(te.c)(te.a,[],"lookingForAJob",{type:"checkbox",textBefore:"Are looking for a job? "}),Object(te.c)(te.b,[Le,ee.b],"lookingForAJobDescription",{placeholder:"Describe what job you are looking for and about your skills",textBefore:"Looking for a job description: "}),Object(O.jsxs)("div",{children:["Your contacts:",Object(O.jsxs)("div",{className:Te.a.contactsList,children:[Object(te.c)(te.a,[Le],"contacts.github",{placeholder:"github",textBefore:"Github: "}),Object(te.c)(te.a,[Le],"contacts.vk",{placeholder:"vk",textBefore:"Vk: "}),Object(te.c)(te.a,[Le],"contacts.facebook",{placeholder:"facebook",textBefore:"Facebook: "}),Object(te.c)(te.a,[Le],"contacts.instagram",{placeholder:"instagram",textBefore:"Instagram: "}),Object(te.c)(te.a,[Le],"contacts.twitter",{placeholder:"twitter",textBefore:"Twitter: "}),Object(te.c)(te.a,[Le],"contacts.website",{placeholder:"website",textBefore:"Website: "}),Object(te.c)(te.a,[Le],"contacts.youtube",{placeholder:"youtube",textBefore:"YouTube: "})]})]})]})]})})),ze=function(e){var t=Object(n.useState)(!1),r=Object(_.a)(t,2),c=r[0],o=r[1],s=Object(n.useState)(e.status),a=Object(_.a)(s,2),i=a[0],u=a[1];Object(n.useEffect)((function(){u(e.status)}),[e.status]);var l=function(){c&&e.updateProfileStatus(i),o(!c)};return Object(O.jsx)("div",{children:c?Object(O.jsx)("input",{onChange:function(e){u(e.currentTarget.value)},onBlur:l,autoFocus:!0,value:i}):Object(O.jsx)("span",{onDoubleClick:e.isOwner?l:null,children:i||"-set-status-"})})},Re=function(e){var t=e.profile,r=e.isFetchingUserProfile,n=e.updateProfileStatus,c=e.status,o=e.isOwner,s=e.savePhoto,a=e.goToEditMode,i=e.updateProfileData,u=e.editMode,l=!r&&t;return Object(O.jsxs)(O.Fragment,{children:[" ",l&&Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:Te.a.bannerBlock,children:Object(O.jsx)("img",{src:"https://helpx.adobe.com/content/dam/help/en/photoshop/using/convert-color-image-black-white/jcr_content/main-pars/before_and_after/image-before/Landscape-Color.jpg"})}),Object(O.jsxs)("div",{className:Te.a.descriptionBlock,children:[Object(O.jsx)("img",{src:t.photos.large||V,className:Te.a.userPhoto}),o&&Object(O.jsx)("input",{type:"file",onChange:function(e){var t=e.currentTarget;t.files.length&&s(t.files[0])}}),Object(O.jsx)("div",{children:t.fullName}),Object(O.jsx)(ze,{status:c,updateProfileStatus:n,isOwner:o}),u?Object(O.jsx)(Be,{onSubmit:i,initialValues:t}):Object(O.jsx)(Me,{profile:t,goToEditMode:a,isOwner:o})]})]})||Object(O.jsx)(g,{})," "]})},Ge=function(e){return Object(O.jsxs)("div",{children:[Object(O.jsx)(Re,{profile:e.profile,status:e.status,updateProfileStatus:e.updateProfileStatus,isFetchingUserProfile:e.isFetchingUserProfile,isOwner:e.isOwner,savePhoto:e.savePhoto,goToEditMode:e.toggleProfileDataEditMode,updateProfileData:e.updateProfileData,editMode:e.profileDataEditMode}),Object(O.jsx)(Ae,{posts:e.posts,addPost:e.addPost,resetPostForm:e.resetPostForm})]})},He=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"getCurrentUserId",value:function(){return Number.parseInt(this.props.match.params.userId)||this.props.authUserId}},{key:"getUserData",value:function(e){this.props.setCurrentUserId(this.getCurrentUserId()),this.props.getUserProfile(e),this.props.getProfileStatus(e)}},{key:"componentDidMount",value:function(){this.getUserData(this.getCurrentUserId())}},{key:"componentDidUpdate",value:function(){this.getCurrentUserId()!==this.props.prevUserId&&this.getUserData(this.getCurrentUserId())}},{key:"render",value:function(){return Object(O.jsx)("div",{children:Object(O.jsx)(Ge,{profile:this.props.profile,status:this.props.status,updateProfileStatus:this.props.updateProfileStatus,posts:this.props.posts,addPost:this.props.addPost,resetPostForm:this.props.resetPostForm,isFetchingUserProfile:this.props.isFetchingUserProfile,isOwner:this.props.authUserId===this.getCurrentUserId(),savePhoto:this.props.savePhoto,profileDataEditMode:this.props.profileDataEditMode,toggleProfileDataEditMode:this.props.toggleProfileDataEditMode,updateProfileData:this.props.updateProfileData})})}}]),r}(c.a.Component),Je=Object(p.d)(Object(d.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,posts:e.profilePage.posts,isFetchingUserProfile:e.profilePage.isFetchingUserProfile,prevUserId:e.profilePage.currentUserId,authUserId:e.auth.userId,profileDataEditMode:e.profilePage.profileDataEditMode}}),{getUserProfile:ke,getProfileStatus:function(e){return function(){var t=Object(v.a)(x.a.mark((function t(r){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.getProfileStatus(e);case 2:n=t.sent,r(Pe(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateProfileStatus:function(e){return function(){var t=Object(v.a)(x.a.mark((function t(r){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.updateProfileStatus(e);case 2:0===t.sent.resultCode&&r(Pe(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},resetPostForm:function(){return function(e){e(Object(P.a)("post"))}},addPost:function(e){return{type:pe,text:e}},setCurrentUserId:function(e){return{type:ge,userId:e}},savePhoto:function(e){return function(){var t=Object(v.a)(x.a.mark((function t(r){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.savePhoto(e);case 2:0===(n=t.sent).resultCode&&r((c=n.data.photos,{type:me,photos:c}));case 4:case"end":return t.stop()}var c}),t)})));return function(e){return t.apply(this,arguments)}}()},toggleProfileDataEditMode:_e,updateProfileData:function(e){return function(t,r){var n=r().auth.userId,c=function(e){var t=Object.entries(e.contacts).filter((function(e){var t=Object(_.a)(e,2);return t[0],t[1]})).filter((function(e){var t=Object(_.a)(e,2);return t[0],!t[1].includes("://")})).map((function(e){var t=Object(_.a)(e,2),r=t[0],n=t[1];return[r,"https://".concat(n)]})).reduce((function(e,t){var r=Object(_.a)(t,2),n=r[0],c=r[1];return Object(f.a)(Object(f.a)({},e),{},Object(w.a)({},n,c))}),{});return S.a.merge(Object(f.a)(Object(f.a)({},e),{},{contacts:Object(f.a)({},e.contacts)}),{contacts:t})}(e);D.updateData(Object(f.a)({userId:n},c)).then((function(e){0===e.resultCode?(t(_e()),t(ke(n))):t(Object(P.b)("profile",E(e.messages)))}))}}}),j.g,ae.a)(He),We=Object(p.d)(ae.a)((function(){return Object(O.jsx)("div",{children:"Settings"})})),qe=function(e,t,r,n){return e.map((function(e){return e[t]===r?Object(f.a)(Object(f.a)({},e),n):e}))},Ve="network/users/FOLLOW",Xe="network/users/UNFOLLOW",Ye="network/users/SET_USERS",Ze="network/users/SET_TOTAL_USERS_COUNT",Ke="network/users/SET_PAGE_SIZE",Qe="network/users/SET_CURRENT_PAGE",$e="network/users/TOGGLE_IS_FETCHING",et="network/users/TOGGLE_FOLLOWING_PROGRESS",tt={users:[],totalUsersCount:0,pageSize:5,currentPage:1,isFetching:!1,followingInProgress:[]},rt=function(e){return{type:Ve,userId:e}},nt=function(e){return{type:Xe,userId:e}},ct=function(e){return{type:$e,isFetching:e}},ot=function(e,t){return{type:et,isFollowing:e,userId:t}},st=function(){var e=Object(v.a)(x.a.mark((function e(t,r,n,c){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(ot(!0,t)),e.next=3,n(t);case 3:0===e.sent.resultCode&&r(c(t)),r(ot(!1,t));case 6:case"end":return e.stop()}}),e)})));return function(t,r,n,c){return e.apply(this,arguments)}}(),at=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ve:return Object(f.a)(Object(f.a)({},e),{},{users:qe(e.users,"id",t.userId,{followed:!0})});case Xe:return Object(f.a)(Object(f.a)({},e),{},{users:qe(e.users,"id",t.userId,{followed:!1})});case Ye:return Object(f.a)(Object(f.a)({},e),{},{users:Object(be.a)(t.newUsers)});case Ze:return Object(f.a)(Object(f.a)({},e),{},{totalUsersCount:t.totalUsersCount});case Ke:return Object(f.a)(Object(f.a)({},e),{},{pageSize:t.pageSize});case Qe:return Object(f.a)(Object(f.a)({},e),{},{currentPage:t.currentPage});case $e:return Object(f.a)(Object(f.a)({},e),{},{isFetching:t.isFetching});case et:return t.isFollowing?Object(f.a)(Object(f.a)({},e),{},{followingInProgress:[].concat(Object(be.a)(e.followingInProgress),[t.userId])}):Object(f.a)(Object(f.a)({},e),{},{followingInProgress:e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},it=r(134),ut=r.n(it),lt=r(98),dt=r.n(lt),jt=function(e){var t=e.totalItemsCount,r=e.pageSize,c=e.currentPage,o=e.onChangePageNumber,s=e.portionSize,a=void 0===s?10:s,i=Math.ceil(t/r),u=Array.apply(null,Array(i)).map((function(e,t){return t+1})),l=Math.ceil(i/a),d=Object(n.useState)(1),j=Object(_.a)(d,2),b=j[0],p=j[1],f=(b-1)*a+1,h=b*a;return Object(O.jsxs)("div",{children:[b>1&&Object(O.jsx)("button",{onClick:function(){return p(b-1)},children:"Prev"}),u.filter((function(e){return e>=f&&e<=h})).map((function(e){return Object(O.jsx)("span",{className:ut()(Object(w.a)({},dt.a.selected,e===c),dt.a.pageNumber),onClick:function(){return o(e)},children:e},e)})),b<l&&Object(O.jsx)("button",{onClick:function(){return p(b+1)},children:"Next"})]})},bt=r(99),pt=r.n(bt),ft=function(e){var t=e.user,r=e.followingInProgress,n=e.unfollow,c=e.follow;return Object(O.jsxs)("div",{className:pt.a.user,children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{children:Object(O.jsx)(b.b,{to:"/profile/".concat(t.id),children:Object(O.jsx)("img",{className:pt.a.photo,src:t.photos.small||V})})}),Object(O.jsx)("div",{children:t.followed?Object(O.jsx)("button",{disabled:r.some((function(e){return e===t.id})),onClick:function(){return n(t.id)},children:"Unfollow"}):Object(O.jsx)("button",{disabled:r.some((function(e){return e===t.id})),onClick:function(){return c(t.id)},children:"Follow"})})]}),Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{children:t.name}),Object(O.jsx)("div",{children:t.status})]}),t.location?Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{children:t.location.country}),Object(O.jsx)("div",{children:t.location.city})]}):null]})]})},ht=function(e){return Object(O.jsxs)("div",{children:[Object(O.jsx)(jt,{totalItemsCount:e.totalUsersCount,pageSize:e.pageSize,currentPage:e.currentPage,onChangePageNumber:e.onChangePageNumber}),Object(O.jsx)("div",{children:e.users.map((function(t){return Object(O.jsx)(ft,{user:t,followingInProgress:e.followingInProgress,unfollow:e.unfollow,follow:e.follow},t.id)}))})]})},Ot=r(135),gt=Object(Ot.a)((function(e){return e.usersPage.users}),(function(e){return e.filter((function(e){return!0}))})),mt=function(e){return e.usersPage.totalUsersCount},xt=function(e){return e.usersPage.pageSize},vt=function(e){return e.usersPage.currentPage},Pt=function(e){return e.usersPage.isFetching},wt=function(e){return e.usersPage.followingInProgress},_t=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"componentDidMount",value:function(){this.props.requestUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){var e=this;return Object(O.jsxs)(O.Fragment,{children:[this.props.isFetching&&Object(O.jsx)(g,{}),Object(O.jsx)(ht,{users:this.props.users,totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,followingInProgress:this.props.followingInProgress,follow:this.props.follow,unfollow:this.props.unfollow,onChangePageNumber:function(t){return e.props.requestUsers(t,e.props.pageSize)}})]})}}]),r}(c.a.Component),kt=Object(p.d)(Object(d.b)((function(e){return{users:gt(e),totalUsersCount:mt(e),pageSize:xt(e),currentPage:vt(e),isFetching:Pt(e),followingInProgress:wt(e)}}),{follow:function(e){return function(t){st(e,t,F,rt)}},unfollow:function(e){return function(t){st(e,t,A,nt)}},requestUsers:function(e,t){return function(){var r=Object(v.a)(x.a.mark((function r(n){var c;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(ct(!0)),r.next=3,N(e,t);case 3:c=r.sent,n(ct(!1)),n({type:Qe,currentPage:e}),n((s=c.items,{type:Ye,newUsers:s})),n((o=c.totalCount,{type:Ze,totalUsersCount:o}));case 8:case"end":return r.stop()}var o,s}),r)})));return function(e){return r.apply(this,arguments)}}()}}))(_t),Ct="network/app/INITIALIZED_SUCCESS",It={isInitialized:!1},St=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ct:return Object(f.a)(Object(f.a)({},e),{},{isInitialized:!0});default:return e}},yt=r(131),Ut=r(136),Et=r(129),Nt=Object(p.c)({profilePage:Ce,dialogsPage:Et.b,usersPage:at,auth:q,form:yt.a,app:St}),Ft=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||p.d,At=Object(p.e)(Nt,Ft(Object(p.a)(Ut.a)));window.state=function(){return At.getState()};var Dt=At,Tt=c.a.lazy((function(){return r.e(3).then(r.bind(null,294))})),Mt=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).catchAllUnhandledErrors=function(e){alert("Error occurred: "+e.reason.message)},e}return Object(i.a)(r,[{key:"componentDidMount",value:function(){this.props.initialize(),window.addEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"render",value:function(){return this.props.isInitialized?Object(O.jsxs)("div",{className:"app-wrapper",children:[Object(O.jsx)(Q,{}),Object(O.jsx)(de,{}),Object(O.jsx)("div",{className:"app-wrapper_content",children:Object(O.jsxs)(j.d,{children:[Object(O.jsx)(j.b,{exact:!0,path:"/",render:function(){return Object(O.jsx)(j.a,{to:"/profile"})}}),Object(O.jsx)(j.b,{path:"/dialogs",render:(e=Tt,function(t){return Object(O.jsx)(n.Suspense,{fallback:Object(O.jsx)(g,{}),children:Object(O.jsx)(e,Object(f.a)({},t))})})}),Object(O.jsx)(j.b,{path:"/profile/:userId?",render:function(){return Object(O.jsx)(Je,{})}}),Object(O.jsx)(j.b,{path:"/users",render:function(){return Object(O.jsx)(kt,{})}}),Object(O.jsx)(j.b,{path:"/news",render:function(){return Object(O.jsx)(je,{})}}),Object(O.jsx)(j.b,{path:"/music",render:function(){return Object(O.jsx)(ie,{})}}),Object(O.jsx)(j.b,{path:"/settings",render:function(){return Object(O.jsx)(We,{})}}),Object(O.jsx)(j.b,{path:"/login/facebook",render:function(){return Object(O.jsx)("div",{children:"Facebook login page"})}}),Object(O.jsx)(j.b,{path:"/login",render:function(){return Object(O.jsx)(se,{})}}),Object(O.jsx)(j.b,{path:"*",render:function(){return Object(O.jsx)("div",{children:"404 Not found"})}})]})})]}):Object(O.jsx)(g,{});var e}}]),r}(n.Component),Lt=Object(p.d)(Object(d.b)((function(e){return{isInitialized:e.app.isInitialized}}),{initialize:function(){return function(e){Promise.all([e(J())]).then((function(){e({type:Ct})}))}}}),j.g)(Mt),Bt=function(){return Object(O.jsx)(b.a,{children:Object(O.jsx)(d.a,{store:Dt,children:Object(O.jsx)(Lt,{})})})},zt=function(e){e&&e instanceof Function&&r.e(4).then(r.bind(null,293)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,o=t.getLCP,s=t.getTTFB;r(e),n(e),c(e),o(e),s(e)}))};s.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(Bt,{})}),document.getElementById("root")),window.store=Dt,zt()},36:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r(3),c=r(29),o=r(30),s=r(32),a=r(31),i=r(1),u=r.n(i),l=r(10),d=r(13),j=r(7),b=r(0),p=function(e){return{isAuth:e.auth.isAuth}},f=function(e){var t=function(t){Object(s.a)(i,t);var r=Object(a.a)(i);function i(){var e;Object(c.a)(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).hasProfileUrlUserId=function(){return"/profile/:userId?"===e.props.match.path&&e.props.match.params.userId},e}return Object(o.a)(i,[{key:"render",value:function(){return this.props.isAuth||this.hasProfileUrlUserId()?Object(b.jsx)(e,Object(n.a)({},this.props)):Object(b.jsx)(l.a,{to:"/login"})}}]),i}(u.a.Component);return Object(j.d)(Object(d.b)(p),l.g)(t)}},39:function(e,t,r){e.exports={formControl:"FormsControls_formControl__2FPvr",error:"FormsControls_error__5ueAb",errorText:"FormsControls_errorText__3SPMA",commonError:"FormsControls_commonError__134vU"}},40:function(e,t,r){e.exports={bannerBlock:"ProfileInfo_bannerBlock__-CO68",descriptionBlock:"ProfileInfo_descriptionBlock__UAFdX",userPhoto:"ProfileInfo_userPhoto__aI7jm",contactsList:"ProfileInfo_contactsList__nbfGC"}},59:function(e,t,r){e.exports={header:"Header_header__QyoLQ",logo:"Header_logo__scy_r",authBlock:"Header_authBlock__3pxx0",userImg:"Header_userImg__y9CPW"}},8:function(e,t,r){"use strict";r.d(t,"b",(function(){return j})),r.d(t,"a",(function(){return b})),r.d(t,"c",(function(){return p}));var n=r(3),c=r(100),o=(r(1),r(39)),s=r.n(o),a=r(91),i=r(0),u=["input","meta"],l=["input","meta"],d=function(e){var t=e.meta,r=e.children,n=t.touched&&t.error;return Object(i.jsxs)("div",{className:"".concat(s.a.formControl," ").concat(n?s.a.error:""),children:[Object(i.jsx)("div",{children:r}),Object(i.jsx)("div",{children:Object(i.jsx)("span",{className:s.a.errorText,children:n?t.error:""})})]})},j=function(e){var t=e.input,r=(e.meta,Object(c.a)(e,u));return Object(i.jsx)(d,Object(n.a)(Object(n.a)({},e),{},{children:Object(i.jsx)("textarea",Object(n.a)(Object(n.a)({},t),r))}))},b=function(e){var t=e.input,r=(e.meta,Object(c.a)(e,l));return Object(i.jsx)(d,Object(n.a)(Object(n.a)({},e),{},{children:Object(i.jsx)("input",Object(n.a)(Object(n.a)({},t),r))}))},p=function(e,t,r,n){var c=n.type,o=n.placeholder,s=n.textBefore,u=n.textAfter;return Object(i.jsxs)("div",{children:[s&&Object(i.jsx)("div",{children:Object(i.jsx)("b",{children:s})}),Object(i.jsx)("div",{children:Object(i.jsx)(a.a,{component:e,name:r,placeholder:o,validate:t,type:c})}),u&&Object(i.jsx)("div",{children:u})]})}},96:function(e,t,r){e.exports={postsBlock:"MyPosts_postsBlock__2N1L1",posts:"MyPosts_posts__2ITPq"}},97:function(e,t,r){e.exports={item:"Post_item__3ksB5",img:"Post_img__2XeU3"}},98:function(e,t,r){e.exports={pageNumber:"Paginator_pageNumber__qwVOG",selected:"Paginator_selected__1byaM"}},99:function(e,t,r){e.exports={user:"User_user__2Bzoj",photo:"User_photo__imNug"}}},[[291,1,2]]]);
//# sourceMappingURL=main.2e827bfe.chunk.js.map